<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Test Often and Prosper</title>

		<link rel="stylesheet" href="css/reveal.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- OPI style -->
		<link rel="stylesheet" href="lib/css/object-partners-revealjs-theme.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,100i,300,300i,400,400i,500,500i,700,700i" rel="stylesheet">

        <style>

            .reveal pre {
                line-height: 1.15em;
            }

            .reveal pre code {
                max-height: inherit;
                overflow: visible;
            }

            .reveal pre.groovy code {
                font-size: large;
            }

            .reveal section img.singleImageSm {
                height: 400px; margin-bottom: 0;
            }

            .reveal section img.singleImage {
                height: 450px; margin: 0;
            }

            .reveal section img.singleImageLg {
                height: 475px; margin-bottom: 0;
            }

            img.fullImage {
                height: 500px;
            }

            .reveal .overlayFragment {
                position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;
            }

            .reveal .slides section .fragment.collapse-fragment:not(.current-fragment) {
                display: none;
            }

            .reveal .slides section .fragment.collapse-fragment.current-fragment {
                display: inherit;
            }

            #spock-junit-feature-table p { font-size: 0.55em; margin: 2px 0; padding:0px; }

            <!-- -->
            .displayNone { display: none;  }

            .fragment.visible.displayNone { display: block }

            .starting-fragment { /* Custom class with custom JS edit. Show this fragment on slide load */ }

            .reveal .slides section .fragment.starting-fragment:not(.visible) {
                opacity: 1;
                visibility: visible;
            }
            /*.reveal .slides section .fragment.fade-down.visible,*/
            /*.reveal .slides section .fragment.visible:not(.current-fragment) {*/
                /*color: grey;*/
            /*}*/

            .reveal .slides section.id-resources-slide div {
                margin: 10px 0;

            }

            .reveal .slides section.id-resources-slide div li {
                font-size: 0.8em;
            }

            .hljs mark.please-no {
                background-color: rgba(127, 159, 55, .25) !important;
            }

            .hljs mark.please-no .hljs-comment {
                color: red !important;
            }

        </style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
	<div class="theme-font-montserrat theme-color-white-blue" style="width: 100%; height: 100%;">
		<div class="reveal">
			<div class="slides">
				<section data-state="title">
                    <h2>Test Often and Prosper
                    </h2>
                    <p>A Java developer's guide to Spock</p>
				</section>

                <!--<section>-->
                    <!--<div class="fragment starting-fragment semi-fade-out" data-fragment-index="0">-->
                        <!--Starting frag-->
                    <!--</div>-->

                    <!--<div class="fragment" data-fragment-index="0">-->
                        <!--2nd frag-->
                    <!--</div>-->
                <!--</section>-->


                <!--<section>-->
                    <!--<div class="fragment semi-fade-out" data-fragment-index="0">-->
                        <!--Starting frag-->
                    <!--</div>-->

                    <!--<div class="fragment current-visible" data-fragment-index="0">-->
                        <!--2nd frag-->
                    <!--</div>-->
                <!--</section>-->


                <section data-transition-speed="slow">
                    <h3>WARNING: We will Mock Spock</h3>
                    <div style="display: flex; justify-content: center; ">
                        <div style="flex: 1;">
                            <img src="lib/img/spock-spork.jpg" height="400px">
                        </div>
                        <div style="flex: 1;">
                            <img src="lib/img/spock-the-rock-johnson.jpg" height="400px">
                        </div>
                    </div>
                </section>
                <section>

                    <h3>Me</h3>
                    <div>
                        <p>Derek Eskens</p>
                        <p>@snekse</p>
                    </div>
                    <div class="fragment">
                        <p>Dev 15+ years, OPI 3+ years</p>
                        <p>Java, JS, Groovy</p>
                    </div>
                    <p class="fragment">Star Wars > Star Trek</p>
                    <p class="fragment">'Foodie for Life' is tattooed across my tummy</p>
                </section>
                <section>
                    <img src="lib/img/opi-map2-1024x637.png"
                         style="border:none;opacity:0.15;z-index: -1;
                             position:fixed;top:50%;left:50%;transform: translate(-50%, -50%);">

                    <h3 style="padding-bottom: 0.5em">Object Partners, Inc.</h3>
                    <ul>
                        <li>JVM, JS, Mobile, Real-time Data, DevOps</li>
                        <li>~100 Senior Consultants</li>
                        <li>Omaha, Minneapolis</li>
                        <li>Average Tenure Over 5 years</li>
                        <li>Founded 1996</li>
                    </ul>
                </section>
				<section>
                    <h3>The new frontier</h3>
                    <div class="fragment fade-out" style="position: absolute; width:100%;" data-fragment-index="0">
                        <img src="lib/img/star-trek-warp-speed-mr-scott-jason-politte.jpg" class="singleImage"
                             style="display: block;margin-left: auto; margin-right: auto;">
                    </div>

                    <p class="fragment grow fade-up current-visible" data-fragment-index="0">
                        We now have stakeholders asking for testing metrics<br/>and faster deployment of features
                    </p>
                    <p class="fragment grow fade-up current-visible">
                        <B>Headline</B>
                        <span><br/>Learn how ___ deploys to production ___ times a <em>day</em></span>
                    </p>
                    <p class="fragment grow fade-up current-visible">Testing now takes less code and less time.</p>
				</section>
                <section>
                    <h3>Testing will make you a rockstar</h3>
                    <img src="lib/img/spock-the-rockstar.jpg" class="singleImage">
                </section>
                <section>
                    <h3>Rockstars prosper</h3>
                    <img src="lib/img/spock-canadian-money-prosper.jpg" class="singleImage">
                </section>
                <section>
                    <img src="lib/img/spock-nodding-agrees-yeah-LOGICAL.gif" class="fullImage">
                </section>
                <section>
                    <h3>Poll Question Time!</h3>
                    <img src="lib/img/spock-raise-hand.jpg"  class="singleImage"/>
                </section>
				<section>
                    <h3>Why not just use JUnit?</h3>
                    <img src="lib/img/spock-kirk-amok-time-fight.png"  class="singleImage"/>
				</section>
                <section>
                    <h3>You could ...</h3>
                    <img src="lib/img/spock-and-junit-ebony-and-ivory.png" height="300px"/>
                    <h3 class="fragment fade-up">You could even...</h3>
                </section>
                <section>
                    <div style="position: relative">
                        <div class="overlayFragment" >
                    <pre class="groovy" style="margin-bottom: auto" ><code data-trim  data-noescape style="font-size: 0.85em">
class CrewRecruiterServiceSpockMockitoTest
      extends Specification implements CommonCrew {
    //<mark class="please-no">Inject Mockito mocks into your Spock tests</mark> ðŸ˜±
    @InjectMocks CrewRecruiterService crewRecruiterService

    @Mock PayrollService payrollService

    def setup() {
        <mark>MockitoAnnotations</mark>.initMocks(this);
    }

    void "SelectForBudget can be tested with Mockito mocks"() {
        Mockito.when(payrollService.getSalary(any(CrewMember)))
               .thenReturn(100000L)

        when:
        List crew = crewRecruiterService.selectForBudget(200000L, POOL)

        then: "Use 3rd party fluent assertion library"
        // AKA: crew == [KIRK, SPOCK]
        <mark>assertThat</mark>(crew).containsExactly(KIRK, SPOCK).inOrder();
    }
}
                    </code></pre>
                        </div>
                        <div class="fragment overlayFragment current-fragment fade-left"
                             style="top:25px;margin:0 -100%; margin:0 calc(50% - 50vw);left:220px;left: calc(80% - 50vw)"
                             data-fragment-index="1">
                            <img src="lib/img/spock-silly-humans.jpg" class="fullImage" style="max-width:inherit"/>
                        </div>
                  </div>
                </section>
                <section>
                    <h3>Why Spock kicks butt...</h3>
                    <img src="lib/img/spock_amok_time_bounce.gif" class="singleImage"/>
                </section>
                <section data-transition-speed="slow">
                    <h6>JUnit Example</h6>
                    <div style="position:relative">
                    <pre class="fragment overlayFragment semi-fade-out java"
                         data-fragment-index="0"
                         style="width: 110%; left:-50px" ><code data-trim data-noescape style="font-size: .85em">
@Test
public void selectForBudget() throws Exception {
  // Mock $100k salary for Kirk & Spock
  when(payrollService.getSalary(KIRK)).thenReturn(100000L);
  when(payrollService.getSalary(SPOCK)).thenReturn(100000L);

  // When selecting crew on a $200k budget
  List&lt;CrewMember&gt; crew = crewRecruiterService.selectForBudget(200000L, POOL);

  // Then Kirk and Spock are the only 2 members selected, and returned in that order.
  Assert.assertEquals(new ArrayList<>(asList(KIRK, SPOCK)), crew);

  //create inOrder object passing any mocks that need to be verified in order
  InOrder inOrder = inOrder(payrollService);
  inOrder.verify(payrollService).getSalary(argThat(arg -> arg == CommonCrew.KIRK));
  inOrder.verify(payrollService).getSalary(argThat(arg -> arg == CommonCrew.SPOCK));
  inOrder.verifyNoMoreInteractions();
}
                    </code></pre>
                        <div class="fragment overlayFragment fade-down" data-fragment-index="0" >
                            <img src="lib/img/spock-big-sigh.gif" class="fullImage" style="margin:0" />
                        </div>
                    </div>
                </section>

                <section>
                    <h6>Spock Example</h6>
                    <div style="position:relative" >
                        <pre class="fragment fade-in overlayFragment groovy" style="width: 110%;left: -50px;" data-fragment-index="0"><code data-trim data-noescape style="font-size: .85em">
void "SelectForBudget spends budget in crew priority order /
      and avoids unnecessary calls to payroll service"() {

    when:
    def crew = crewRecruiterService.selectForBudget(200000L, POOL)

    then:
    1 * payrollService.getSalary(KIRK) >> 100000  // first add Kirk

    then:
    1 * payrollService.getSalary(SPOCK) >> 100000 // add Spock after Kirk

    then:
    0 * payrollService.getSalary(_)

    and:
    crew == [KIRK, SPOCK]
}
                    </code></pre>
                        <pre class="fragment fade-out overlayFragment groovy" style="width: 110%;left: -50px;" data-fragment-index="0"><code data-trim data-noescape style="font-size: .85em">
void "SelectForBudget spends budget in crew priority order /
      and avoids unnecessary calls to payroll service"() {

    when: 'We have enough to pay for Kirk and Spock'
    def crew = crewRecruiterService.selectForBudget(200000L, POOL)

    then: 'We only make our expensive external system salary calls in the order we expect'
    1 * payrollService.getSalary(KIRK) >> 100000  // first add Kirk

    then: 'add Spock'
    1 * payrollService.getSalary(SPOCK) >> 100000 // // add Spock after Kirk

    then: 'no more calls to that service since we have depleted our budget'
    0 * payrollService.getSalary(_)

    and: 'our crew consists of just Kirk and Spock'
    crew == [KIRK, SPOCK]
}
                    </code></pre>
                    </div>
                </section>

                <section>
                    <img src="lib/img/spock-CHANGE-IS-ESSENTIAL-PROCESS.gif"  class="fullImage"/>
                </section>

                <section>
                    <h3>My history with groovy</h3>
                    <div style="position: relative">
                        <div class="fragment overlayFragment current-visible" data-fragment-index="1">
                            <img src="lib/img/damn-you-groovy.jpg"
                                 class="singleImage" >
                        </div>
                        <div class="fragment overlayFragment current-visible" data-fragment-index="2">
                            <img src="lib/img/spock-nemoy-1952-kid-monk-baroni.jpg"
                                 class="singleImage" >
                        </div>
                        <div class="fragment overlayFragment current-visible" data-fragment-index="3">
                            <img src="lib/img/spock-hair-cut.jpeg"
                                 class="singleImage" >
                        </div>
                        <div class="fragment overlayFragment current-visible" data-fragment-index="4">
                            <img src="lib/img/leonard-nimoy-spock-singing-bilbo-with-hobbit-foot.jpg"
                                 class="singleImage" >
                        </div>
                        <div class="fragment overlayFragment current-visible" data-fragment-index="5">
                            <img src="lib/img/spock-christmas-sweaters.jpg"
                                 class="singleImage" >
                        </div>
                    </div>
                </section>
                <section>
                    <h3>Me looking at old JUnit tests today</h3>
                    <img src="lib/img/spock-button.gif" class="singleImage">
                </section>

                <section>
                    <div style="display: flex; justify-content: center; width: 100%;">
                        <div style="flex: 1;margin-top: auto; margin-bottom: auto">
                            <h2>Spock Overview</h2>
                            <h6>The 3 best things</h6>
                        </div>
                        <div style="flex: 1;">
                            <img src="lib/img/Best_of_Spock_cover.jpg" class="fullImage" style="position:relative; left:-75px;">
                        </div>
                    </div>
                </section>

                <section>
                    <h6>Easy mocking. Easy verifications.</h6>
                    <pre class="groovy"><code data-trim style="font-size: .85em">
def "set course test"() {
    Route routeFromEarthToAndoria = new Route([
        "Hang a left at Mars",
        "Turn right at Alpha Centauri A",
        "Gravity assist from Midos V"])

    when:
    Route results = navigationSystem.setCourse("Andoria")

    then:
//  â†“ verify this mock called exactly 1 time w/ these params
    1 * mockCAS.findRoute("Earth", "Andoria") >> routeFromEarthToAndoria
//                                            â†‘ (then return) pojo route
    results.directions.first() == "Hang a left at Mars"

}
                    </code></pre>
                </section>
				<section>
                    <h6>Parameterized tests</h6>
                    <pre class="groovy"><code data-trim >
@Unroll("A budget of #salaryCap pays for #expectedCrew")
void "SelectForBudget adds crew in priority order until budget depleted"() {

    when: 'selecting crew at various salary cap levels'
    def crew = crewRecruiterService.selectForBudget(salaryCap, POOL)

    then: 'we get back crew we can afford in priority order'
    crew == expectedCrew

    where:
    salaryCap   || expectedCrew
    0           || []
    100000      || [KIRK]
    299999      || [KIRK, SPOCK]
    MAX_VALUE   || POOL
}
                    </code></pre>
                </section>

                <section data-transition-speed="slow">

                    <div style="position: relative">
                        <div class="fragment overlayFragment fade-out shrink" data-fragment-index="0">
                            <h6>Spock is Groovy</h6>
                            <div style="display: flex; justify-content: center; width: 100%;">
                                <div style="flex: 1;">
                                    <img src="lib/img/groovy-spock-neck-scarf.jpg"   style="position:relative; left:-75px;">
                                </div>
                                <div style="flex: 1">
                            <pre class="groovy" style="margin-right: 0; width: 120%;position:relative; left:-50px;" ><code data-trim >
Closure filterCrewByLevel = { List crew, int rank ->
    crew.findResults { it.rank.commandLevel < rank }
}

// ...

1 * mockService.findOfficers(crewMembers) >> {
    filterCrewByLevel(it, 5)
}

                            </code></pre>
                                    <h6 style="font-size: 0.83em">
                                        Spock <span style="text-decoration: underline">is</span> Groovy >
                                        JUnit <span style="text-decoration: underline">in</span> Groovy</h6>
                                </div>
                            </div>
                        </div>
                        <div class="fragment overlayFragment collapse-fragment fade-up current-visible"
                             data-fragment-index="0">
                            <img src="lib/img/spock-data-awesome.jpg" class="fullImage" style="margin: 0" >
                        </div>
                    </div>
                </section>
                <section>
                    <div style="display: flex; justify-content: center; width: 100%; align-items: flex-end">

                        <div style="flex: 1;position:relative; left:-50px;">
                            <h6>This is Groovy</h6>
                            <img src="lib/img/I-am-not-spock-cover.jpg">
                        </div>
                        <div style="flex: 4">
                            <pre class="groovy" style="margin-right: 0; width: 98%;"><code data-trim >
def KIRK = new CrewMember(firstName: "James", lastName: "Kirk")

Range oneToTen = (1..10) // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

def crewNames = ["Kirk", "Spock", "Ensign Redshirt"] // ArrayList

// Transform a collection
List crew = crewNames.collect { String lastName ->
    long yos = getRandomFromRange(oneToTen) //calling outer scope refs
    new CrewMember(lastName: lastName, yearsOfService: yos)
}

// IT, " vs ', interpolation of strings, elvis, null-safe
crew.each { println "${it.firstName?:''} $it.lastName - $it.rank?.salary" }

assert KIRK != SPOCK  // == is .equals, === for references
                            </code></pre>
                        </div>
                    </div>
                    <p style="font-size: small"><a href="http://groovy-lang.org/differences.html" target="_blank">
                        http://groovy-lang.org/differences.html</a><br/><br/>
                        <a href="http://groovy-lang.org/syntax.html" target="_blank">
                            http://groovy-lang.org/syntax.html</a>
                    </p>

                </section>

                <section>
                    <div style="display: flex; justify-content: center; width: 100%; align-items: flex-start; position: relative; top: 20px;">
                        <div style="flex: 4">
                            <pre class="groovy" style="margin-top: 15px; left:-50px; margin-right: 0; width: 98%;"><code data-trim >
@Subject Starship starship = new Starship()
@Collaborator PayrollService payrollService = Mock()
@Shared def POOL = ["Kirk", "Spock", "Ensign Redshirt"].asImmutable()
@Collaborator def crewManager = Spy(CrewManager, constructorArgs: [POOL])

def "A very descriptive name for our test"() {
    def currentCrew = ['RebelSpy'] + POOL  /* given: */

    expect:
    currentCrew.size() == 4

    when:
    def result = starship.findIntruders()

    then:
    (1..4) * payrollService.getSalary(_) //default returns falsey
    1 * crewManager.getExpectedCrew(starship) //concrete call
    (1.._) * crewManager.isSpy(starship, _ as CrewMember) >> { ship, cm ->
        return ship.name == 'Enterprise' && cm.lastName.contains('Spy')
    }
    result.lastName == 'RebelSpy'
}
                            </code></pre>
                        </div>
                        <div style="flex: 1;">
                            <img src="lib/img/i-am-spock-full-cover.jpg" style="position:relative; ">
                            <h6>This is Spock</h6>
                        </div>
                    </div>
                </section>

                <section>
                    <h4 style="margin-bottom: 10px">Man that's Groovy</h4>
                    <img src="lib/img/leonard-nimoy-spock-singing-bilbo-with-groovy-teens.gif" class="singleImageLg">
                </section>

                <section>
                    <h2>Spock Deep Dive</h2>
                    <img src="lib/img/Kirk_and_Spock_swimming.jpg" class="singleImage">
                </section>

                <section>
                    <h6>Basic structure</h6>
                    <pre class="groovy"><code data-trim >
class MyFirstSpockSpec extends Specification {

  StringUtil stringUtil = new StringUtil()

  // optional setup / teardown methods
  def setup() {}       // run before every feature method
  def cleanup() {}     // run after every feature method
  def setupSpec() {}   // run before the first feature method
  def cleanupSpec() {} // run after the last feature method

  void testContains() {
    expect:
    stringUtil.contains("Spock", "S")
  }
}
                    </code></pre>
                </section>

                <section>
                    <h6 style="margin-top: 15px">Spec fixture setup</h6>
                    <pre class="groovy" style="font-size: 0.65em"><code data-trim >
class SetupMethodsAreNotNeededSpec extends MyBaseSpecification {
  // Setup methods aren't really needed
  StringUtil stringUtilOne = new StringUtil()
  @Shared NumberUtil numberUtilOne = new NumberUtil()

  /* ----------------  But if you really want them... ----------------*/
  StringUtil stringUtilTwo
  @Shared NumberUtil numberUtilTwo

  def setup() {
    //super.setup()  //calling super for Fixture methods isn't needed
    stringUtilTwo = new StringUtil()
  }

  def setupSpec() {
    numberUtilTwo = new NumberUtil()  //instance fields must be @Shared
  }
}
                    </code></pre>
                </section>

                <section>
                    <h6 style="margin-top: 20px">Feature method structure</h6>
                    <pre class="groovy" style="font-size: 0.60em"><code data-trim >
void testSpockIsCool() {
  // The setup: or given: labels are optional
  def crew = [KIRK, SPOCK, SCOTTY]

  expect: "the obvious answer from a fanboy"
  SPOCK == fanboy.whoIsTheCoolest(crew)

  when: "Spock isn't an option"
  fanFav = fanboy.whoIsTheCoolest([KIRK, SCOTTY])

  then: "Kung Fu is cool"
  fanFav == KIRK

  and: "for visual separation"
  fanFav.name.contains('James')

  cleanup: "optional clean up"
  SPOCK.mindMeld(fanboy)
}
                    </code></pre>
                    <img src="lib/img/spock-clean-up-mop.jpg"
                         style="height: 250px;position: absolute;bottom: 10px;">
                </section>

                <section>
                    <div style="position: relative; top: -30px;">
                        <h3 style="transform: rotate(90deg);transform-origin: left bottom 0; opacity: 0.7; color: #999;
                                          text-align: left;margin-left:80px;text-indent:120px;">Method Names</h3>
                        <h6 style="text-transform:inherit">testVulcanHumor() { ... }</h6>
                        <img src="lib/img/trek-kirk-spock-mad-magazine.jpg" class="singleImage">
                        <h6 style="text-transform:inherit">"Vulcans find Mad magazine humor confusing"() { ... }</h6>
                    </div>

                </section>

                <section style="width: 120%;left:-120px;">
                        <h6>Self documenting code helps prevent uncomfortable conversations with your future self</h6>
                    <img src="lib/img/old-spock-to-new-spock-WHAT-WERE-YOU-THINKING.jpg" class="singleImage"
                         style="max-width: none; ">
                </section>

                <section>
                    <h6>Assertions</h6>
                    <pre class="groovy" ><code data-trim >
void "expect assertions to be truthy"() {
  expect:
  SPOCK.fullName == "S'chn T'gai Spock"
  SPOCK.isCool() && ! SPOCK.isFunny()
  SPOCK.rank > 0
  SPOCK.salary  // Truthy

  when:
  SPOCK.tellJoke()

  then:
  thrown(IllogicalRequestException)

  when:
  SPOCK.writeTests()

  then:
  notThrown(IllogicalRequestException)
  noExceptionThrown()  // Rarely used
}
                    </code></pre>
                </section>

                <section>
                    <h6>Grouping assertions by subject</h6>
                    <pre class="groovy" ><code data-trim style="font-size: 1em">
void "Registering a crew member is done completely"() {
    when:
    def crewMember = ship.getCrewMemberById(1)

    then:
    with(crewMember) {
        firstName == 'James'
        lastName  == 'Kirk'
        rank.title == 'Captain'
    }
}
                    </code></pre>
                </section>

                <section>
                    <h6>Assertions in Helpers</h6>
                    <pre class="groovy" ><code data-trim data-noescape style="font-size: 0.9em">
void "getCrew returns the expected size of valid crew members"() {
  when:
  def crew = ship.getCrew()

  then:
  crew.size() == 12

  // This would not tell you _which_ crewMember failed the assertion
  <span style="text-decoration: line-through">crew.every { crewMember.fullName?:'' != '' }</span>

  crew.each { assertIsValidCrewMember(it) }
}

void assertIsValidCrewMember(crewMember) {
    assert crewMember.fullName?:'' != ''
}
                    </code></pre>
                </section>

                <section>
                    <h6>Failures</h6>
                    <pre class="groovy" style="width: 110%; left:-50px" ><code data-trim style="color: palevioletred" >
Condition not satisfied:

crew.collect { it.fullName }.join(';') == [KIRK, RED_SHIRT].collect { it.fullName }.join(';')
|    |                       |         |   |     |          |                       |
|    [James Kirk]            James Kirk|   Kirk  Doe        [James Kirk, John Doe]  James Kirk;John Doe
[Kirk]                                 false
                                       9 differences (52% similarity)
                                       James Kirk(---------)
                                       James Kirk(;John Doe)

at com.objectpartners.eskens.spock.services.CrewRecruiterServiceSpockTest.
                        Crew has a red shirt(CrewRecruiterServiceSpockTest.groovy:76)

com.objectpartners.eskens.spock.services.CrewRecruiterServiceSpockTest > Crew has a red shirt FAILED
    org.spockframework.runtime.SpockComparisonFailure at CrewRecruiterServiceSpockTest.groovy:76
1 test completed, 1 failed
:test FAILED
                    </code></pre>


                </section>
                <section>
                    <h3>Parameterized tests IN DEPTH</h3>
                    <img src="lib/img/spock-kirk-comic-blackhole.jpg" class="singleImage"/>
                </section>

                <section>
                    <h6>A simple parameterized test example</h6>
                    <pre class="groovy"><code data-trim >
@Unroll("A budget of #salaryCap pays for #expectedCrew")
void "SelectForBudget adds crew in priority order until budget depleted"() {

    given: 'a flat rate of 100,000 per member'
    payrollService.getSalary(_) &gt;&gt; 100000

    when: 'selecting crew at various salary cap levels'
    def crew = crewRecruiterService.selectForBudget(salaryCap, POOL)

    then: 'we get back crew we can afford in priority order'
    crew == expectedCrew

    where: 'input of salaryCap should produce output of expectedCrew'
    salaryCap    || expectedCrew
    0            || []
    100000       || [KIRK]
    299999       || [KIRK, SPOCK]
    MAX_VALUE    || POOL
}
                    </code></pre>
                </section>

                <section>
                    <img src="lib/img/happy-SPOCK-APPROVES-there-is-much-logic-in-this.jpg" class="fullImage" style="height: 550px;margin-top: 40px">
                </section>

                <section>
                    <h6>Single input data tables</h6>
                    <pre class="groovy"><code data-trim style="font-size: .9em">
@Unroll("Scotty, warp #warpSpeed")
void "Engines don't blow up if we give it a bad command"() {

    when: 'we tell the ship to warp at various level'
    ship.controls.command('warp', warpSpeed)

    then: 'It never explodes'
    noExceptionThrown()

    where:
    warpSpeed   || _
    null        || _
    0           || _
    1           || _
    MAX_VALUE   || _
    'Bajillion' || _
}
                    </code></pre>
                </section>

                <section>
                    <h6>Using Spec values</h6>
                    <pre class="groovy"><code data-trim style="font-size: .9em">
@Shared CrewManager crewMgr = new CrewManagerTestingUtil()
static final ENTERPRISE = "USS Enterprise - NCC-1701"

@Unroll("#crewMember should be assigned to the #expectedShip")
void "Using Shared and statics"() {
    expect:
    // ...

    where: "props defined outside test must be static"
    crewMember              || expectedShip
    crewMgr.get('Spock')    || ENTERPRISE
    crewMgr.get('Kirk')     || ENTERPRISE
    crewMgr.get('Data')     || 'USS Enterprise - NCC-1701-C'
}
                    </code></pre>
                </section>

                <section>
                    <h6>Reference Left Cells</h6>
                    <pre class="groovy"><code data-trim style="font-size: .9em">
given: 'an initial speed'
ship.controls.command('warp', start)
assert getCurrentWarpSpeed() == start

when:
ship.controls.command("${multiplier} our velocity")

then:
getCurrentWarpSpeed() == finalSpeed

where: 'we reference our start value to calculate the final value'
start | multiplier  || finalSpeed
1     | 'Double'    || start * 2
4     | 'Triple'    || start * 3
7     | 'Quadruple' || 12   //Max warp factor is 12

                    </code></pre>
                </section>

                <section>
                    <h6>Extract Common Calculations</h6>
                    <pre class="groovy"><code data-trim style="font-size: .85em">
expect: 'an initial speed'
sendCommand('warp', start)

expect:
sendCommand("${command} our velocity").getCurrentWarpSpeed() == finalSpeed

where: 'we reference our start value to calculate the final value'
start | command     | multiplier
1     | 'Double'    | 2
7     | 'Quadruple' | 4

finalSpeed = [(start * multiplier), 12].max() //Max warp factor is 12

                    </code></pre>
                </section>

                <section>
                    <h6>Iterables as params</h6>

                    <div style="display: flex; justify-content: center; width: 100%;">
                        <div style="flex: 1;">
                            <img src="lib/img/spock-2-plus-2.jpg"   style="position:relative; left:-75px;">
                        </div>
                        <div style="flex: 1">
                            <pre class="groovy" style="margin-right: 0; width: 120%;position:relative; left:-50px;" ><code data-trim >
def "spock can maths"() {
  expect:
  [a,b].sum(0) == c

  where:
  a << [2, 3, 4]
  b << (2..6).step(2)
  c << "4,7,10".split(',')
}
                            </code></pre>
                            <pre class="groovy" style="margin-right: 0; width: 120%;position:relative; left:-50px;" ><code data-trim >
  where:
  [lastName, rank, yos] << excel.get(1, ['B','C','J'])
                            </code></pre>
                        </div>
                    </div>
                </section>

                <section>
                    <h6>Closure params!</h6>
                    <pre class="groovy"><code data-trim data-noescape style="font-size: .9em" >
when:
command.call(start)

then:
getCurrentWarpSpeed() == finalSpeed

where: 'fun with closures'
maxAwareCaptain = { speed ->
    KIRK.say( speed > 12 ? <span class="hljs-string">'Sulu, WHAT ARE YOU DOING! Slow Down!'</span>
                         : <span class="hljs-string">'Steady as she goes, Mr Sulu'</span>)
}

start | command                                    || finalSpeed
1     | { ship.command('warp 2') }                 || 2
6     | { KIRK.say('Warp factor one, Mr. Sulu.') } || 1
12    | maxAwareCaptain                            || 12
13    | maxAwareCaptain                            || 12

                    </code></pre>
                </section>

                <section>
                    <img src="lib/img/surprised-NOT-BAD-spock.jpg" class="fullImage">
                </section>

                <section>
                    <h3></h3>
                    <div style="display: flex; justify-content: center; width: 100%;">
                        <div style="flex: 1;">
                            <img src="lib/img/spock-cos-play.jpg"   style="position:relative; left:-75px;">
                        </div>
                        <div style="flex: 1; margin-top: auto; margin-bottom: auto">
                            <h1>Mocks</h1>
                        </div>
                    </div>
                </section>

                <section>
                    <h6>Defining Mocks and Spies</h6>
                    <pre class="groovy" ><code style="font-size: 0.9em">
BridgeInterface bridgeInterface = Mock()
def foodReplicator = Mock(FoodReplicator)
Beamer beamer = Mock(Beamer)

PayrollService payrollService = Spy()
def engineControl = Spy(EngineControl)
def crewManager = Spy(CrewManager, constructorArgs: [POOL])

CrewMember SPOCK = h2.getCrewMember( [ lastName: 'Spock' ])
def spockSpy = Spy(SPOCK) //New feature!

                    </code></pre>
                </section>


                <section>
                    <h6>Injecting Mocks - Take your pick</h6>
                    <pre class="groovy" ><code data-trim style="font-size: 0.92em">
Ship ship = new UssEnterprise()
CrewManager crewManager = Mock()

def setup() {
    ship.crewManager = crewManager
}
                    </code></pre>

                    <pre class="groovy" ><code data-trim style="font-size: 0.92em">
CrewManager crewManager = Mock()
Ship ship = new UssEnterprise(crewManager: crewManager)
                    </code></pre>

                    <pre class="groovy" ><code data-trim style="font-size: 0.92em">

@Subject Ship ship = new UssEnterprise()
@Collaborator CrewManager crewManager = Mock()

// http://bit.ly/spock-subjects-collaborators-extension
                    </code></pre>
                </section>

                <section>
                    <h6>Defining Mock Calls</h6>

                    <div style="display: flex; justify-content: center; width: 100%;">
                        <div style="flex: 1;">
                            <img src="lib/img/spock-sugar-smacks.jpg"   style="position:relative; left:-75px; height: 450px;">
                        </div>
                        <div style="flex: 1">
                            <pre class="groovy" style="margin-right: 0; width: 120%;position:relative; left:-50px;" ><code  data-trim style="font-size: 0.9em">

when: 'a crew member asks for cereal'
computer.command('I want some cereal')

then: """
        expect FoodReplicator called once
        with a quantity param of 1
        and cereal type of 'Sugar Smacks'
      """
1 * foodReplicator.make(1, 'Sugar Smacks')  /*
|   |              |    |
|   |              |    |
|   |              |    argument constraints
|   |              method constraint
|   target constraint
cardinality
*/
                            </code></pre>
                        </div>
                    </div>
                </section>

                <section>
                    <h6>Cardinality</h6>
                    <pre class="groovy" ><code  style="font-size: 0.825em">
/** Taken (almost) directly from the docs **/

1 * computer.command("Lights")      // exactly one call
0 * computer.command("Lights")      // zero calls
(1..3) * computer.command("Lights") // between one and three calls (inclusive)
(1.._) * computer.command("Lights") // at least one call
(_..3) * computer.command("Lights") // at most three calls
/*
  ^^  Groovy Ranges at work
*/

_ * computer.command("Lights")      // any number of calls, including zero
                                    // (rarely needed; see 'Strict Mocking')
computer.command("Lights")          // cardinality is optional, same as: _ *
                    </code></pre>
                </section>

                <section>
                    <h6>Fancy Target & Method Constraints</h6>
                    <pre class="groovy" ><code  style="font-size: 0.90em">
_ * _.getStatus() // Match any getStatus() call for all mocks/spies

_ * tribble._ // Match any method call on a tribble

_ * targetingSystem./Fire.*/ // Match all firing requests via regex

_ * _._  // Match any method call on any mock/spy

(..) * .(*_) // Highly illogical

                    </code></pre>
                </section>

                <section>
                    <h6>Argument Constraints</h6>
                    <pre class="groovy" style="width: 115%;margin-left: auto; margin-right: auto;left:-75px;"><code data-trim style="font-size: 0.85em" >
/** Taken (almost) directly from the docs **/
1 * computer.command("lights")     // an argument that is equal to the String "lights"
1 * computer.command(!"lights")    // an argument that is unequal to the String "lights"
1 * computer.command()             // the empty argument list (would never match in our example)
1 * computer.command(_)            // any single argument (including null)
1 * computer.command(*_)           // any argument list (including the empty argument list)
1 * computer.command(!null)        // any non-null argument
1 * computer.command(_ as String)  // any non-null argument that is-a String
1 * computer.command({ it.length() > 3 }) // an argument that satisfies the given predicate
                                          // (here: message length is greater than 3)

1 * foodReplicator.make( {it > 0}, !null, _ )  // Multiple arguments

                    </code></pre>
                </section>

                <section>
                    <h6>Strict Mocking</h6>
                    <p>Ensure only expected calls are executed</p>
                    <pre class="groovy" ><code  style="font-size: 0.90em">
then: 'expect to make a banana and fail if anything else is made'
1 * foodReplicator.make(1, 'Banana')
0 * foodReplicator.make(*_)
                    </code></pre>
                </section>

                <section>
                    <h6>Why are we doing this?</h6>
                    <img src="lib/img/spock-kirk-do-not-do-it--i-am-going-to-do-it.jpg" class="singleImage">
                </section>

                <section>
                    <h6>Kobayashi Maru</h6>
                    <div style="position: relative">
                        <p class="fragment overlayFragment semi-fade-out"
                           data-fragment-index="0" style="width: 120%;left:-110px;">
                            <img src="lib/img/new-kirk-kobayashi-maru-test-pew-pew.jpg"
                                 class="singleImage" style="max-width: none">
                        </p>
                        <p class="fragment overlayFragment displayNone current-visible fade-up"
                            data-fragment-index="0" style="top:-20px;">
                            <img src="lib/img/new-star-trek-kirk-spock-changing-conditions-kobayashi-maru.gif"
                                 class="fullImage" >
                        </p>
                    </div>


                </section>
                <section>
                    <h6>Let's test what happens if Kirk does the thing</h6>
                    <pre class="groovy" style="width: 100%;"><code data-trim data-noescape style="font-size: 0.90em" >
when: 'Kirk pushes the big red button'
def response = <mark>bigRedButton.push()</mark>

then: 'Klingons have fired on use and disabled out weapons'
targetingSystem.fireAllTheWeapons() <mark>>></mark> { throw new WeaponsMalfunction('') }

then: 'the response confirms the targeting failed'
response == "I'm sorry, Captain. I'm afraid I can't do that."

when: 'Kirk pushes the big red button'
response = <mark>bigRedButton.push()</mark>

then: 'but since he reprogrammed the system'
targetingSystem.fireAllTheWeapons() <mark>>></mark> new TargetingResponse()

then: 'the response indicates targeting worked'
response == "Targeting confirmed."

                    </code></pre>
                </section>


                <section>
                    <div style="position: relative; top: 20px;">
                        <h6>Returning fixed values</h6>
                        <pre class="groovy" style="width: 100%;"><code data-trim data-noescape style="font-size: 0.90em" >
computer.request('What is 1 + 1') >> "2"
computer.request('What is 1 + 2') >> "3"
computer.request("Do the thing") >> "Okay" >> "No"
computer.request("Tribble count") <mark>>>></mark> ["2", "3", "4", "Many"]
                    </code></pre>
                        <h6 style="padding-top: 5px;">Returning dynamic values</h6>
                        <pre class="groovy" style="width: 100%;"><code data-trim data-noescape style="font-size: 0.90em" >
foodReplicator.make(*_) >> {args -> "Food: $args[1]; Qty: $args[0]" }
foodReplicator.make(*_) >> {qty, food -> "Making $qty "+ pluralize(qty, food)}

// Complex mocking
foodReplicator.make(*_) >> {int qty, String food ->
    if (food == 'Cereal') {
        return 'Sorry, we are out of sugar smacks'
    }
    return "Making $qty "+ pluralize(qty, food)
}

// Forcing exceptions
foodReplicator.make( {it <= 0} , _ ) >> { throw new InvalidQuantity(it[0]) }

                    </code></pre>
                    </div>
                </section>

                <section>
                    <h6>Spies for Hipsters</h6>
                    <img src="lib/img/hipster-spock-stocking-hat.jpg" class="singleImage">
                </section>

                <section>
                    <h6>Selective Mocking</h6>
                    <pre class="groovy" ><code data-trim data-noescape style="font-size: 0.98em" >
def payrollService = Spy(PayrollService) {
    // Mock the pay for every crew member the same amount
    _ * getSalaryFor(_ as CrewMember) >> <span class="hljs-number">50_000</span>
}

when:
def amountPaid = accountingService.payCrew()

then: """
      We confirm we ask for getTotalCrewPayroll for our crew,
      but let the impl do it's thing. When the impl calls
      getSalaryFor, that's when our stubbing comes in
      """
1 * payrollService.getTotalCrewPayroll(CREW)
amountPaid ==  <span class="hljs-number">600_000</span> // assuming crew of 12

                        </code></pre>
                </section>

                <section>
                    <h6>Wrapping method calls</h6>
                    <pre class="groovy" style="width: 100%;"><code data-noescape data-trim style="font-size: 1.02em"  >
def alienLibrary = Spy(AlienLibrary)

when:
def result = comms.sendBeacon('Hailing Borg Ship')

then: "We call the actual implementation _after_ we mess with it"
alienLibrary.receive(_) >> { msg ->
    def alteredOutgoingMsg = filterNSFW(msg)
    def alienResp = <mark>callRealMethodWithArgs</mark>(alteredOutgoingMsg)
    return translateResponse(alienResp)
}
result == "Test Often and Prosper"

                        </code></pre>
                </section>
                <section>
                    <h2>Advanced Topics</h2>
                    <img src="lib/img/leonard-nimoy-spock-singing-bilbo-in-car-with-golf-clubs.gif" style="width: 100%">
                </section>

                <section>
                    <h4>Spock Modules & Extensions</h4>
                    <img src="lib/img/simpsons-i-am-not-spock-i-am-spock.gif" class="singleImage">
                </section>
                <section>
                    <h4>Spring Module</h4>
                    <p>Provides Spring integration so beans can be injected into integration specs</p>
                    <h4>Write your own extension</h4>
                    <p>Or borrow ones like the great subject/collaborator extension</p>
                </section>

                <section>
                    <h4>Spring Integration Testing</h4>
                    <pre class="groovy" style="width: 100%;"><code data-trim style="font-size: 0.95em"  >
@SpringBootTest
class CrewMemberIntegrationTest extends Specification {
  @Autowire MockMvc mvc
  @Autowire CrewRepo crewRepo
  def jsonSlurper = new JsonSlurper()

  void 'can fetch crew member by ID'() {
    def rank = new Rank(level: 5, title: 'Grand Admiral')
    def khan = new CrewMember(lastName:'Khan', rank: rank )
    CrewMember khan = crewRepo.saveAndFlush(khan)

    when:
    def data = jsonSlurper.parseText(getJson(mvc, "/crew/${khan.id}"))

    then:
    data.id != null
    data.lastName == 'Khan'
    data.rank.title == 'Grand Admiral'
  }
}
                        </code></pre>
                </section>

                <section>
                    <h6>Spring Integration Testing with Spock Mocks ~ Pt 1</h6>
                    <pre class="groovy" style="width: 100%;"><code data-trim data-noescape style="font-size: 1.05em"  >
@SpringBootTest
class CrewServiceIntegrationTest extends Specification {

  @Autowired CrewService crewService
  @Autowired ExternalSalaryService mockSalaryService

  // test, tests, tests

  /** Override Spring's beans with Spock mocks **/
  @TestConfiguration
  static class Config {
    private DetachedMockFactory factory = new <mark>DetachedMockFactory()</mark>

    @Bean
    ExternalSalaryService externalSalaryService() {
        factory.Mock(ExternalSalaryService)
    }
  }
}
                        </code></pre>
                </section>

                <section>
                    <h6>Spring Integration Testing with Spock Mocks ~ Pt 2</h6>
                    <pre class="groovy" style="width: 100%;"><code data-trim style="font-size: 1.05em"  >
@Autowired CrewService crewService  // class under test
@Autowired ExternalSalaryService mockSalaryService // Mocked Bean

void "crew service delegates to ExternalSalaryService"() {

  when: 'we have 5 crew members in H2'
  def amt = crewService.getTotalCrewCost()

  then: 'use the mocked spring bean in an integration test ðŸ˜ƒ'
  mockSalaryService.getSalaryFor(_) >> 100000
  amt == 500000

}
                        </code></pre>
                    <p style="color: rgb(63,63,63);font-size: smaller">
                        <a href="http://bit.ly/opi-spring-integration-testing-with-spock-mocks"
                           target="_blank">Blog post</a> with more information<br/>
                        <a href="https://github.com/spockframework/spock/pull/796" target="_blank">Coming soon...</a>&nbsp;
                        <span style="font-family: monospace">@SpringBean</span> & <span style="font-family: monospace">@SpringSpy</span>
                    </p>
                </section>

                <section>
                    <h6>Some existing extensions</h6>
                    <div style="display: flex; justify-content: center; width: 100%;">
                        <div style="flex: 1;">
                            <img src="lib/img/dj-spock-blue-shirt.jpg">
                        </div>
                        <div style="flex: 2;">
                            <pre class="groovy"><code data-trim style="font-size: .9em">
@AutoCleanup def fio = new FileIOService()

@Timeout(5)
@Use(DiscoMixin)
@Issue('BUG-1701')
void "is Spock cool"() {
  expect: SPOCK.dance() == "Doin' the Hustle"
}
                            </code></pre>
                        </div>
                    </div>


                </section>

                <section>
                    <h6>Conditional Testing</h6>
                    <pre class="groovy"><code style="font-size: 18px;">
@Ignore("Optional description")

@IgnoreRest //Only run tests annotated w/ this

@IgnoreIf({ System.getProperty("os.name").contains("borg") })

@Requires({ os.holodeck })

@PendingFeature
def "Failing tests marked as skipped"() { expect: false }

@PendingFeature  // Failing Test!  No longer pending :-)
def "marks data driven feature where all iterations pass as _failed!_"() {
    expect: test
    where: test << [true, true, true]
}
                    </code></pre>
                </section>


                <section>
                    <h4>JUnit rules</h4>
                    <pre class="groovy" style="width: 100%;"><code data-trim style="font-size: 1.0em"  >
@Rule
public Retry retry = new Retry(3);

void "taking kobayashi maru test"() {
  expect:
  kobayashiMaru.takeTest().results == 'passed'
}

void "access network filesystem"() {
  when:
  federationCommand.requestFiles('Kobayashi Maru')

  then:
  noExceptionThrown()
}

                        </code></pre>
                </section>

                <section>
                    <h6 style="font-family: monospace">GroovyMock, GroovyStub, GroovySpy</h6>
                    <img src="lib/img/groovy-spock-polka-dot-bubble-shirt.png" class="singleImage">

                </section>

                <section>
                    <h4>Used for mocking...</h4>
                    <ul>
                        <li>dynamic methods</li>
                        <li>instances created<br/>outside your control</li>
                        <li>constructors</li>
                        <li>static methods</li>
                    </ul>
                </section>


                <section>
                    <h3>Problem</h3>
                    <p class="fragment fade-out"  data-fragment-index="0">
                        3rd party <span style="font-family: monospace">FoodReplicator</span>
                        is creating new instances of <span style="font-family: monospace">ReplicatedFood</span>
                    </p>

                    <p class="fragment grow fade-up current-visible" data-fragment-index="0">
                      You need to mock what <span style="font-family: monospace">ReplicatedFood#tastesLike()</span> returns
                    </p>
                    <p class="fragment grow fade-up current-visible">
                        We can't mock or spy <span style="font-family: monospace">FoodReplicator</span>
                    </p>
                </section>

                <section>
                    <h6>Using GroovyMock</h6>
                    <pre class="groovy" style="width: 100%;"><code data-trim style="font-size: 0.90em"  >
def anyFood = GroovyMock(ReplicatedFood, global: true)

when:
def courses = foodReplicator.request("A 5 course meal")

then: 'call our mocked static method once'
1 * ReplicatedFood.getStaticMenuOptions() >> ['Chicken', 'Sugar Smacks', 'Soup']

and: 'Every food item created is a mock, so override tastesLike'
5 * anyFood.tastesLike() >> ['Soup', 'Chicken']

and: 'We should know what our dinner will taste like'
courses*.tastesLike() == ['Soup', 'Chicken', 'Chicken', 'Chicken', 'Chicken']

                        </code></pre>
                </section>
                <section>
                    <h3>Wanna see somethin' cool?</h3>
                    <img src="lib/img/nimoy-car.webp" class="singleImage">
                </section>

                <section>
                    <h3>Testing a Testing Framework</h3>
                    <pre class="groovy" style="width: 100%"><code data-trim style="font-size: 0.82em;" >
def "@PendingFeature marks data driven feature where all iterations pass as failed"() {
  when:
    runner.runWithImports("""
      class Foo extends Specification {
        @PendingFeature
        def bar() {
          expect: test
          where:
            test << [true, true, true]
        }
       }
    """)
  then:
    AssertionError e = thrown(AssertionError)
    e.message == "Feature is marked with @PendingFeature but passes unexpectedly"
}
                    </code></pre>
                </section>

                <section>
                    <h3>That's gangster</h3>
                    <img src="lib/img/gangsta-spock.jpg"  class="singleImage"/>
                </section>

                <section class="id-my-work-is-done-here">
                    <!--

                         data-background-iframe="https://www.youtube.com/embed/1aQLsPCxkPw?rel=0&autoplay=1&controls=0&showinfo=1&autohide=1"
                         data-background-interactive
                    -->


                    <!--<section data-background-image="lib/img/simpsons-my-work-here-is-done.gif" data-background-size="contain">-->
                        <!--&lt;!&ndash;<img src="lib/img/simpsons-my-work-here-is-done.gif">&ndash;&gt;-->
                        <!--&lt;!&ndash;<img src="lib/img/simpsons-my-work-here-is-done.mp4">&ndash;&gt;-->
                    <!--</section>-->
                </section>

                <section>
                    <h2>Questions?</h2>
                    <img src="lib/img/youn-and-old-spock-each-wtf.png" class="singleImage">
                </section>

                <section class="id-resources-slide">
                    <h2>Resources</h2>

                    <div style="display: flex; justify-content: center; ">
                        <div style="flex: 2;">
                            <h6>Libraries</h6>
                            <ul style="list-style: none;">
                                <li><a href="http://spockframework.org/" target="_blank">spockframework.org</a></li>
                                <li><a href="https://mvnrepository.com/artifact/org.spockframework/spock-spring" target="_blank">spock-spring</a></li>
                                <li><a href="https://github.com/marcingrzejszczak/spock-subjects-collaborators-extension" target="_blank">
                                    subjects/collaborators</a></li>
                                <li><a href="https://github.com/opaluchlukasz/junit2spock" target="_blank">junit2spock ?!</a></li>
                            </ul>
                        </div>
                        <div style="flex: 2;">
                            <h6>Rob Fletcher</h6>
                            <ul style="list-style: none;">
                                <li><a href="http://bit.ly/Idiomatic-Spock" target="_blank">Idiomatic Spock</a></li>
                                <li><a href="http://amzn.to/2t6avWb" target="_blank">
                                    Spock: Up and Running</a></li>
                                <li><a href="https://github.com/robfletcher/spock-katas" target="_blank">Spock Katas</a></li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <h6>Meta</h6>
                        <ul style="list-style: none; font-size: 1.2em">
                            <li><a href="http://bit.ly/test-often-and-prosper-slides" target="_blank">Slides
                                <span style="padding: 0 5px"> >></span> bit.ly/toap-slides</a></li>
                            <li><a href="https://github.com/snekse/test-often-and-prosper" target="_blank">Starter Project
                                <span style="padding: 0 5px"> >></span>  bit.ly/toap-proj</a></li>
                        </ul>
                    </div>
                </section>
                <section>
                    <p><a href="http://meetspock.appspot.com/" target="_blank" style="font-family: monospace">meetspock.appspot.com</a></p>
                    <p><a href="http://meetspock.appspot.com/" target="_blank">
                        <img src="lib/img/spock-web-console.png" class="singleImageLg">
                    </a></p>
                </section>
                <section>
                    <h2>Thank You</h2>
                    <img src="lib/img/spock-may-the-force-be-with-you.jpg" class="singleImage">
                </section>
                <section>
                    <h2>Credits</h2>
                    <ul>
                        <li>The Internet</li>
                        <li>People a lot smarter than me</li>
                        <li>Leonard Nimoy</li>
                    </ul>
                </section>

			</div>
		</div>
	</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
                viewDistance: 1,
                //center: false,
				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
            document.addEventListener("DOMContentLoaded", function(event) {
                let el = document.getElementsByClassName("id-my-work-is-done-here")[0];
                let qryParams = location.search;
                let autoPlayFlag = qryParams.includes('autoplay') ? 1 : 0;

                if (autoPlayFlag) {
                    let myWorkUri = "https://www.youtube.com/embed/1aQLsPCxkPw" +
                        "?rel=0&controls=0&showinfo=1&autohide=1&autoplay=1";
                    el.setAttribute('data-background-iframe',myWorkUri);
                    el.setAttribute('data-background-interactive', "true");
                } else {
                    el.setAttribute('data-background-image','lib/img/simpsons-my-work-here-is-done.gif');
                    el.setAttribute('data-background-size','contain');
                }
            });
		</script>
	</body>
</html>
